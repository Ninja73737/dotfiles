# https://github.com/NomisIV/swayhide

include "$HOME/.cache/wal/colors-sway"

output "Unknown TL140BDXP01-0 0x00000000" {
    scale 1
    adaptive_sync on
    position 0 1440
}

exec_always $HOME/.scripts/screenlayout/auto_g14_hz

output "Acer Technologies XV340CK P THQAA0013P00" {
    resolution 3440x1440
    scale 1
    position 0 0
}

output * background #000000 solid_color

exec_always pkill swayidle; swayidle -w timeout 60 "swaylock -f --screenshots --clock --indicator --indicator-radius 100 --indicator-thickness 16 --font \\"JetBrainsMono Nerd Font\\" --effect-blur 16x5 --effect-vignette 0.5:0.5 --ring-color \\"$foreground\\" --line-color 00000000 --inside-color \\"$backgroundCC\\" --separator-color 00000000 --grace 10 --fade-in 10" timeout 180 'swaymsg "output * dpms off"' resume 'swaymsg "output * dpms on"' before-sleep "swaylock -f --screenshots --clock --indicator --indicator-radius 100 --indicator-thickness 16 --font \\"JetBrainsMono Nerd Font\\" --effect-blur 32x5 --effect-vignette 0.5:0.5 --ring-color \\"$foreground\\" --line-color 00000000 --inside-color \\"$backgroundCC\\" --separator-color 00000000"

input "1267:12440:ELAN1201:00_04F3:3098_Touchpad" {
    tap enabled
    natural_scroll enabled
}

input "6940:7013:Corsair_CORSAIR_HARPOON_RGB_WIRELESS_Gaming_Dongle" {
    accel_profile flat
}

exec_always pgrep kmonad || kmonad $HOME/.config/kmonad/laptop_mods.kbd
exec_always pgrep flashfocus || flashfocus
exec_always pgrep plover || plover
exec_always pgrep steam || steam -silent
exec_always pgrep Discord || discord --start-minimized
exec_always pkill mako; mako --background-color "$backgroundCC" --text-color "$foreground"
exec_always pgrep autotiling || autotiling

default_border none
gaps inner 16
gaps outer -16
floating_modifier Mod4 normal
focus_follows_mouse yes
mouse_warping container
default_orientation horizontal
seat * hide_cursor 1000

for_window [title="floatme"] floating enable
for_window [class="Bitwarden"] floating enable
for_window [title=".*YouTube.*"] inhibit_idle visible

bindsym Mod4+w kill
bindsym Mod4+Shift+r reload
bindsym Mod4+Shift+q exec swaymsg exit

bindsym Mod4+h focus left
bindsym Mod4+j focus down
bindsym Mod4+k focus up
bindsym Mod4+l focus right

bindsym Mod4+Shift+h move left
bindsym Mod4+Shift+j move down
bindsym Mod4+Shift+k move up
bindsym Mod4+Shift+l move right

bindsym Mod4+1 workspace number 1
bindsym Mod4+2 workspace number 2
bindsym Mod4+3 workspace number 3
bindsym Mod4+4 workspace number 4
bindsym Mod4+5 workspace number 5
bindsym Mod4+6 workspace number 6
bindsym Mod4+7 workspace number 7
bindsym Mod4+8 workspace number 8
bindsym Mod4+9 workspace number 9
bindsym Mod4+0 workspace number 10

bindsym Mod4+Shift+1 exec swaymsg move container to workspace number 1 && swaymsg workspace number 1
bindsym Mod4+Shift+2 exec swaymsg move container to workspace number 2 && swaymsg workspace number 2
bindsym Mod4+Shift+3 exec swaymsg move container to workspace number 3 && swaymsg workspace number 3
bindsym Mod4+Shift+4 exec swaymsg move container to workspace number 4 && swaymsg workspace number 4
bindsym Mod4+Shift+5 exec swaymsg move container to workspace number 5 && swaymsg workspace number 5
bindsym Mod4+Shift+6 exec swaymsg move container to workspace number 6 && swaymsg workspace number 6
bindsym Mod4+Shift+7 exec swaymsg move container to workspace number 7 && swaymsg workspace number 7
bindsym Mod4+Shift+8 exec swaymsg move container to workspace number 8 && swaymsg workspace number 8
bindsym Mod4+Shift+9 exec swaymsg move container to workspace number 9 && swaymsg workspace number 9
bindsym Mod4+Shift+0 exec swaymsg move container to workspace number 10 && swaymsg workspace number 10

bindsym Mod4+backslash floating toggle

bindsym Mod4+Return exec alacritty
bindsym Mod4+slash exec alacritty -e fish -C lf
bindsym Mod4+C exec alacritty -t "floatme" -o background_opacity=0.8 -e fish -c 'cat ".cache/wal/sequences" && R --quiet --no-save'
bindsym Mod4+space exec wofi --show drun

bindsym Mod4+p exec qbpm launch personal
bindsym Mod4+g exec qbpm launch gaming
bindsym Mod4+u exec qbpm launch university
bindsym Mod4+m exec qbpm launch mod

bindsym Mod4+Shift+p exec brave --profile-directory="Default"
bindsym Mod4+Shift+u exec brave --profile-directory="Profile 2"
bindsym Mod4+Shift+g exec brave --profile-directory="Profile 3"
bindsym Mod4+Shift+m exec brave --profile-directory="Profile 4"

bindsym Mod4+Up exec pulsemixer --change-volume +2
bindsym XF86AudioRaiseVolume exec pulsemixer --change-volume +2
bindsym Mod4+Down exec pulsemixer --change-volume -2
bindsym XF86AudioLowerVolume exec pulsemixer --change-volume -2
bindsym Mod4+Shift+Up exec pulsemixer --list-sinks | grep Spotify | awk '{ print $4 }' | sed "s/\,\$//g" | xargs -I {} pulsemixer --id {} --change-volume +2
bindsym Mod4+Shift+Down exec pulsemixer --list-sinks | grep Spotify | awk '{ print $4 }' | sed "s/\,\$//g" | xargs -I {} pulsemixer --id {} --change-volume -2
bindsym Mod4+Shift+Left exec playerctl --player=spotify previous
bindsym Mod4+Shift+Right exec playerctl --player=spotify next
bindsym Mod4+Shift+Space exec playerctl --player=spotify play-pause

bindsym XF86MonBrightnessUp exec fish -c "echo (math 'min('(cat /sys/class/backlight/amdgpu_bl0/brightness)'+15,255)') > /sys/class/backlight/amdgpu_bl0/brightness"
bindsym XF86MonBrightnessDown exec fish -c "echo (math 'max('(cat /sys/class/backlight/amdgpu_bl0/brightness)'-15,0)') > /sys/class/backlight/amdgpu_bl0/brightness"

bindsym XF86KbdBrightnessUp exec fish -c "switch (asusctl -k | sed 's/^Current keyboard led brightness: //'); case 48; asusctl -k low; case 49; asusctl -k med; case 50; asusctl -k high; end"
bindsym XF86KbdBrightnessDown exec fish -c "switch (asusctl -k | sed 's/^Current keyboard led brightness: //'); case 49; asusctl -k off; case 50; asusctl -k low; case 51; asusctl -k med; end"

bindsym Mod4+Shift+S exec grimshot copy area
bindsym Mod1+Shift+S exec grimshot copy area

bindsym XF86Launch1 exec /bin/sh -c 'ps aux | grep "kmonad $HOME/.config/kmonad/laptop_mods.kbd" | grep -v "grep" > /dev/null && (pkill kmonad; kmonad $HOME/.config/kmonad/laptop.kbd & disown)|| (pkill kmonad; kmonad $HOME/.config/kmonad/laptop_mods.kbd & disown)'

mode "resize" {
    bindsym h resize shrink width 10px
    bindsym j resize grow height 10px
    bindsym k resize shrink height 10px
    bindsym l resize grow width 10px

    bindsym Escape mode "default"
}

bindsym Mod4+r mode "resize"

font "pango:JetBrainsMono Nerd Font Regular 16px"

bar {
    mode hide

    position top

    status_command $HOME/.scripts/status

    colors {
        background $background
        statusline $foreground
        focused_workspace $foreground $foreground $background
        active_workspace $background $background $foreground
        inactive_workspace $background $background $foreground
        urgent_workspace $foreground $foreground $background
    }

    status_edge_padding 0
    status_padding 0

}

include /etc/sway/config.d/*
